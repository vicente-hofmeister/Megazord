
Table users {
  id integer [default: `gen_random_uuid()`]
  username varchar [not null]
  name varchar [not null]
  email varchar[] [not null]
  phone integer
  created_at timestamp [not null, default: `now()`]
  updated_at timestamp [not null, default: `now()`]
  deleted_at timestamp
  personal_position_data_ref varchar [not null, default: ""]
  privacy_settings varchar [not null, default: "default"]

  indexes {
    id [pk]
    username
    email
    phone
  }
}

Table follows {
  follower_id int [not null, ref: > users.id]
  following_id int [not null, ref: > users.id]
  tier varchar [default: 'regular']
  followed_at timestamp

  indexes {
    (follower_id, following_id) [pk]
  }
}

Table groups {
  group_id int
  owner_id int [not null, ref: > users.id]
  created_at timestamp
  group_position_data_ref varchar

  indexes {
    group_id [pk]
  }
}

Table user_groups {
  user_id int [not null, ref: > users.id]
  group_id int [not null, ref: > groups.group_id]

  indexes {
    (user_id, group_id) [pk]
  }
}